# yaml-language-server: $schema=https://www.membrane-api.io/v7.1.0.json

components:
  log:
    chain:
      - request:
          - log:
              message: "Path: ${path}"
  cors:
    chain:
      - response:
          - setHeader:
              name: Access-Control-Allow-Origin
              value: "*"
          - setHeader:
              name: Access-Control-Allow-Methods
              value: POST, PUT
---

api:
  port: 2000
  path:
    uri: /foo
  flow:
    - $ref: '#/components/log'
    - return:
        status: 200
---

api:
  port: 2000
  path:
    uri: /bar
  flow:
    - $ref: '#/components/log' # Chains can be applied to more than one API
    - $ref: '#/components/cors' # Referencing long chains can keep API definitions small and comprehensible
    - return:
        status: 200
