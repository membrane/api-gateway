# yaml-language-server: $schema=https://www.membrane-api.io/v7.1.0.json
api:
  port: 2000
  method: GET
  path:
    uri: /cities/{city}
  flow:
    - request:
        - soapBody:
            src: |
              <getCity xmlns="https://predic8.de/cities">
                  <name>${pathParam.city}</name>
              </getCity>
        - setHeader:
            name: SOAPAction
            value: https://predic8.de/cities/get
    - response:
        - template:
            contentType: application/json
            src: |
              {
              	"country": ${xpath('string(//country)')},
              	"population": ${xpath('number(//population)')}
              }
  target:
    # POST is required for SOAP requests
    method: POST
    url: https://www.predic8.de/city-service
