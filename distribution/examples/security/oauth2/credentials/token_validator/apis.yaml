# yaml-language-server: $schema=https://www.membrane-api.io/v6.3.11.json
api:
  name: Token Validator
  port: 2000
  flow:
    # Validates tokens against authorization server - blocks request on invalid tokens
    - tokenValidator:
        endpoint: http://localhost:8000/oauth2/userinfo
  # Forwards the request if the token is valid
  target:
    host: localhost
    port: 3000

---

api:
  port: 3000
  flow:
    - response:
        - template:
            src: You accessed the protected resource!
    - return: {}

---

api:
  port: 9002
  flow:
    - adminConsole: {}