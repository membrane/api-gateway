api:
  port: 9999
  flow:
    # Membrane does not support WebSocket Extensions for now, so we remove the header
    - groovy:
        src: |
          if(exc.getRequest() != null)
          exc.getRequest().getHeader().removeFields("Sec-WebSocket-Extensions");
          if(exc.getResponse() != null)
          exc.getResponse().getHeader().removeFields("Sec-WebSocket-Extensions");
    # WebSocket intercepting starts here
    - webSocket:
        flow:
          # logs the content of a WebSocket frame to the console
          - wsLog: {}
  target:
    host: localhost
    port: 8080