<!DOCTYPE html>
<html>
<head>
	<script src="jquery.min.js"></script>
	<script src="stomp.js"></script>
</head>
<body>

<button id="send" name="Send">Send</button>

Messages:

<div id="messages"></div>

<script>
	var connectNow;
	$(function () {

		connectNow = function() {

			const exampleSocket = new WebSocket(
					"wss://localhost:4443/"
			);

			exampleSocket.onopen = (event) => {
				exampleSocket.send("Here's some text that the server is urgently awaiting!");
				$("#send").click(function() {
					console.log("here");
					exampleSocket.send("Message from client.");
				});
			};

			exampleSocket.onmessage = (event) => {
				console.log(event);
				console.log(event.data);
				$("#messages").append("<p>" + event.data + "</p>");
			};

			exampleSocket.onclose = (event) => {
				console.log(event);
			}

			exampleSocket.onerror = (event) => {
				console.log(event);
			}

/*
			var client = Stomp.client("wss://localhost:4443/");

			client.debug = function(str) {
				$("#debug").append(str + "\n");
			};

			console.log("connecting...");
			client.connect("system", "manager", function (frame) {
				console.log("connected.");
				client.subscribe("/queue/foo", function (msg) {
					$("#messages").append("<p>" + msg.body + "</p>");
				});
			}, function () {
				// connect failed
				console.log("disconnecting...");
				client.disconnect(function() {
					console.log("disconnected.");
					window.setTimeout(connectNow, 1000);
				});
			});

 */
		};
		connectNow();
	});
</script>

</body>
</html>
