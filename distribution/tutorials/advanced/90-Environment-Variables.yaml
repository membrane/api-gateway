# yaml-language-server: $schema=https://www.membrane-api.io/v7.1.0.json
#
# Tutorial: Environment Variables via SpEL (#{env.})
#
# This tutorial shows how to use environment variables in YAML using SpEL templates:
#   - #{env.PORT} reads the environment variable PORT
#   - use e.g. #{env.PORT ?: 3000} to set port 3000 as default
#
# Note: The environment variables are case-sensitive
#
# 1) Set PORT
#     Linux/macOS: export PORT=3000
#     Windows PowerShell: $env:PORT="3000"
#     Windows CMD: set PORT=3000
#
# 2) Start membrane from the same terminal so the env var is available
#
# 3) Try:
#     curl -v http://localhost:2000/
#
#
api:
  port: 2000
  target:
    url: http://localhost:#{env.PORT}
---
api:
  port: "#{env.PORT}"
  flow:
    - static:
        src: |
          Hello from port #{env.PORT}
    - return: {}
