# yaml-language-server: $schema=https://www.membrane-api.io/v6.3.11.json
#
# Membrane Tutorial: Path Rewriting
#
# Try:
#
#   curl http://localhost:2000/fruits/7
#
# Observe the log output.

spec:
  port: 2000
  flow:
    - request:
      - log:
          message: Requested ${path}
      - rewriter:
          - map:
              # Put values in quotes when using special characters
              from: "/fruits/(.*)"
              to: "/shop/v2/products/$1"
      - log:
          message: Rewritten ${path}
  target:
    url: https://api.predic8.de
