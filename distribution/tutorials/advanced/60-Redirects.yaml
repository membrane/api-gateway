# yaml-language-server: $schema=../../core/target/classes/com/predic8/membrane/core/config/json/membrane.schema.json
#
# Membrane Tutorial: Redirects
#
# 1.) Browser redirect
#     Open http://localhost:2000/fruits/7 in your browser. You should be redirected to https://api.predic8.de/shop/v2/products/7.
# 2.) Examine response
# curl -v localhost:2000/fruits/7
# Take a look at the response HTTP 'Location' header

spec:
  port: 2000
  flow:
    - request:
      - log:
          message: Requested ${path}
      - rewriter:
          - map:
              from: "/fruits/(.*)"
              to: "https://api.predic8.de/shop/v2/products/$1"
              do: redirect_permanent
